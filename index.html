<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Switzel Login</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>

<body>
  <h2>Login</h2>

  <input type="email" id="email" placeholder="Email" /><br /><br />
  <input type="password" id="password" placeholder="Password" /><br /><br />

  <button onclick="loginUser()">Login</button>
  <button onclick="registerUser()">Register</button>

  <p id="status"></p>

  <hr />

  <h3 id="welcome"></h3>
  <button onclick="logoutUser()">Logout</button>

  <!-- Firebase SDKs (NO imports, NO modules) -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

  <script>
    // ðŸ” Firebase Config (YOURS)
    const firebaseConfig = {
      apiKey: "AIzaSyAYfk1EuidLP0PG0XPqOvHZUcJxitwtYOE",
      authDomain: "switzelint-53a3f.firebaseapp.com",
      projectId: "switzelint-53a3f",
      appId: "1:349606864096:web:e695676bb4b5c6c5271c85"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    // âœ… LOGIN
    function loginUser() {
      const email = document.getElementById("email").value;
      const password = document.getElementById("password").value;

      auth.signInWithEmailAndPassword(email, password)
        .then((userCredential) => {
          const user = userCredential.user;

          // Store locally (NO DATABASE)
          localStorage.setItem("user", JSON.stringify({
            uid: user.uid,
            email: user.email
          }));

          document.getElementById("status").innerText = "Login successful";
          showUser();
        })
        .catch((error) => {
          document.getElementById("status").innerText = error.message;
        });
    }

    // âœ… REGISTER
    function registerUser() {
      const email = document.getElementById("email").value;
      const password = document.getElementById("password").value;

      auth.createUserWithEmailAndPassword(email, password)
        .then(() => {
          document.getElementById("status").innerText = "Registration successful. You can login now.";
        })
        .catch((error) => {
          document.getElementById("status").innerText = error.message;
        });
    }

    // âœ… LOGOUT
    function logoutUser() {
      auth.signOut().then(() => {
        localStorage.removeItem("user");
        document.getElementById("welcome").innerText = "";
        document.getElementById("status").innerText = "Logged out";
      });
    }

    // âœ… SHOW USER (LOCAL)
    function showUser() {
      const user = JSON.parse(localStorage.getItem("user"));
      if (user) {
        document.getElementById("welcome").innerText =
          "Welcome, " + user.email;
      }
    }

    // Restore session on refresh
    showUser();
  </script>
</body>
</html>
