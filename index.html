<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Switzel Internal Admin</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body { background:#0f172a; color:#e5e7eb; font-family:Arial; padding:20px }
.box { background:#020617; padding:15px; border-radius:8px; margin-bottom:15px }
input, select, button { padding:8px; width:100%; margin:5px 0 }
button { background:#2563eb; color:#fff; border:none; cursor:pointer }
button:hover { background:#1d4ed8 }
.hidden { display:none }
nav button { width:auto; margin-right:5px }
</style>
</head>

<body>

<!-- LOGIN -->
<div id="loginBox" class="box">
  <h2>Admin Login</h2>
  <input id="email" placeholder="Email">
  <input id="password" type="password" placeholder="Password">
  <button onclick="login()">Login</button>
</div>

<!-- APP -->
<div id="app" class="hidden">

<nav class="box">
  <button onclick="show('teams')">Teams</button>
  <button onclick="show('projects')">Projects</button>
  <button onclick="show('tasks')">Tasks</button>
  <button onclick="show('logs')">Logs</button>
  <button onclick="logout()">Logout</button>
</nav>

<!-- TEAMS -->
<div id="teams" class="box hidden">
  <h3>Teams</h3>
  <input id="teamName" placeholder="Team name">
  <button onclick="addTeam()">Add Team</button>
  <ul id="teamList"></ul>
</div>

<!-- PROJECTS -->
<div id="projects" class="box hidden">
  <h3>Projects</h3>
  <input id="projectName" placeholder="Project name">
  <button onclick="addProject()">Create Project</button>
  <div id="projectList"></div>
</div>

<!-- TASKS -->
<div id="tasks" class="box hidden">
  <h3>Tasks</h3>

  <input id="taskTitle" placeholder="Task title">

  <select id="taskProject"></select>
  <select id="taskTeam"></select>

  <button onclick="addTask()">Add Task</button>

  <div id="taskList"></div>
</div>

<!-- LOGS -->
<div id="logs" class="box hidden">
  <h3>Activity Logs</h3>
  <ul id="logList"></ul>
</div>

</div>

<!-- FIREBASE + APP -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
import { getAuth, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";

/* ðŸ”¥ FIREBASE CONFIG */
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "switzelint-53a3f.firebaseapp.com",
  projectId: "switzelint-53a3f",
  appId: "YOUR_APP_ID"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);

/* DATA (NO DATABASE) */
const teams = [];
const projects = [];
const tasks = [];
const logs = [];

/* AUTH */
window.login = () =>
  signInWithEmailAndPassword(auth, email.value, password.value)
    .catch(e => alert(e.message));

window.logout = () => signOut(auth);

onAuthStateChanged(auth, user => {
  if (user) {
    loginBox.classList.add("hidden");
    app.classList.remove("hidden");
    show("teams");
    log("Admin logged in");
  } else {
    loginBox.classList.remove("hidden");
    app.classList.add("hidden");
  }
});

/* NAV */
window.show = id => {
  ["teams","projects","tasks","logs"].forEach(x =>
    document.getElementById(x).classList.add("hidden"));
  document.getElementById(id).classList.remove("hidden");
};

/* TEAMS */
window.addTeam = () => {
  if (!teamName.value) return;
  teams.push(teamName.value);
  teamName.value = "";
  log("Team added");
  render();
};

/* PROJECTS */
window.addProject = () => {
  if (!projectName.value) return;
  projects.push(projectName.value);
  projectName.value = "";
  log("Project created");
  render();
};

/* TASKS */
window.addTask = () => {
  if (!taskTitle.value) return;

  tasks.push({
    title: taskTitle.value,
    project: taskProject.value,
    team: taskTeam.value,
    status: "Pending"
  });

  log("Task created");
  taskTitle.value = "";
  render();
};

window.updateStatus = (i, s) => {
  tasks[i].status = s;
  log(`Task marked ${s}`);
  render();
};

/* RENDER */
function render() {
  teamList.innerHTML = teams.map(t => `<li>${t}</li>`).join("");
  projectList.innerHTML = projects.map(p => `<li>${p}</li>`).join("");

  taskProject.innerHTML = projects.map(p => `<option>${p}</option>`).join("");
  taskTeam.innerHTML = teams.map(t => `<option>${t}</option>`).join("");

  taskList.innerHTML = tasks.map((t,i) => `
    <div class="box">
      <strong>${t.title}</strong><br>
      Project: ${t.project}<br>
      Team: ${t.team}<br>
      Status:
      <select onchange="updateStatus(${i}, this.value)">
        <option ${t.status==="Pending"?"selected":""}>Pending</option>
        <option ${t.status==="In Progress"?"selected":""}>In Progress</option>
        <option ${t.status==="Done"?"selected":""}>Done</option>
      </select>
    </div>
  `).join("");
}

/* LOGS */
function log(m) {
  logs.unshift(new Date().toLocaleTimeString()+" â€” "+m);
  logList.innerHTML = logs.map(l => `<li>${l}</li>`).join("");
}
</script>

</body>
</html>
