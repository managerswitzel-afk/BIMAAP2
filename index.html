<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Switzel Internal System</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #0f172a;
      color: #e5e7eb;
      padding: 20px;
    }
    input, select, button {
      padding: 8px;
      margin: 5px 0;
      width: 100%;
    }
    button {
      background: #2563eb;
      color: white;
      border: none;
      cursor: pointer;
    }
    button:hover { background: #1d4ed8; }
    .hidden { display: none; }
    .box {
      background: #020617;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
    }
    nav button {
      width: auto;
      margin-right: 5px;
    }
  </style>
</head>

<body>

<!-- LOGIN -->
<div id="loginBox" class="box">
  <h2>Admin Login</h2>
  <input id="email" type="email" placeholder="Email">
  <input id="password" type="password" placeholder="Password">
  <button onclick="login()">Login</button>
</div>

<!-- APP -->
<div id="app" class="hidden">

  <nav class="box">
    <button onclick="show('teams')">Teams</button>
    <button onclick="show('projects')">Projects</button>
    <button onclick="show('logs')">Activity Logs</button>
    <button onclick="logout()">Logout</button>
  </nav>

  <!-- TEAMS -->
  <div id="teams" class="box hidden">
    <h2>Teams</h2>
    <input id="teamName" placeholder="Team name">
    <button onclick="addTeam()">Add Team</button>
    <ul id="teamList"></ul>
  </div>

  <!-- PROJECTS -->
  <div id="projects" class="box hidden">
    <h2>Projects</h2>

    <input id="projectName" placeholder="Project name">
    <button onclick="addProject()">Create Project</button>

    <h3>Assign Team</h3>
    <select id="projectSelect"></select>
    <select id="teamSelect"></select>
    <button onclick="assignTeam()">Assign</button>

    <h3>Overview</h3>
    <div id="projectList"></div>
  </div>

  <!-- LOGS -->
  <div id="logs" class="box hidden">
    <h2>Activity Logs</h2>
    <ul id="logList"></ul>
  </div>

</div>

<!-- FIREBASE + APP LOGIC -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js";
  import { getAuth, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.23.0/firebase-auth.js";

  /* ðŸ”¥ FIREBASE CONFIG (YOUR PROJECT) */
  const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "switzelint-53a3f.firebaseapp.com",
    projectId: "switzelint-53a3f",
    appId: "YOUR_APP_ID"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  /* GLOBAL DATA (NO DATABASE) */
  const teams = [];
  const projects = [];
  const logs = [];

  /* AUTH */
  window.login = () => {
    signInWithEmailAndPassword(auth, email.value, password.value)
      .catch(err => alert(err.message));
  };

  window.logout = () => signOut(auth);

  onAuthStateChanged(auth, user => {
    if (user) {
      loginBox.classList.add("hidden");
      app.classList.remove("hidden");
      show("teams");
      log("Admin logged in");
    } else {
      loginBox.classList.remove("hidden");
      app.classList.add("hidden");
    }
  });

  /* NAV */
  window.show = id => {
    ["teams","projects","logs"].forEach(s =>
      document.getElementById(s).classList.add("hidden")
    );
    document.getElementById(id).classList.remove("hidden");
  };

  /* TEAMS */
  window.addTeam = () => {
    if (!teamName.value) return;
    teams.push(teamName.value);
    teamName.value = "";
    log("Team added");
    renderTeams();
  };

  function renderTeams() {
    teamList.innerHTML = teams.map(t => `<li>${t}</li>`).join("");
    renderProjects();
  }

  /* PROJECTS */
  window.addProject = () => {
    if (!projectName.value) return;
    projects.push({ name: projectName.value, teams: [] });
    projectName.value = "";
    log("Project created");
    renderProjects();
  };

  window.assignTeam = () => {
    const p = projects[projectSelect.selectedIndex];
    const t = teamSelect.value;
    if (!p || !t) return;
    if (!p.teams.includes(t)) {
      p.teams.push(t);
      log(`Assigned ${t} to ${p.name}`);
    }
    renderProjects();
  };

  function renderProjects() {
    projectSelect.innerHTML = projects.map(p => `<option>${p.name}</option>`).join("");
    teamSelect.innerHTML = teams.map(t => `<option>${t}</option>`).join("");

    projectList.innerHTML = projects.map(p => `
      <div style="margin:10px 0">
        <strong>${p.name}</strong>
        <ul>${p.teams.map(t => `<li>${t}</li>`).join("")}</ul>
      </div>
    `).join("");
  }

  /* LOGS */
  function log(msg) {
    logs.unshift(`${new Date().toLocaleTimeString()} â€” ${msg}`);
    logList.innerHTML = logs.map(l => `<li>${l}</li>`).join("");
  }
</script>

</body>
</html>
